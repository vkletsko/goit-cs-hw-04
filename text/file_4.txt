РЕЗУЛЬТАТИ ДОСЛІДЖЕННЯ

Вміст системних каталогів операційної системи Windows 10 та їх призначення.

Наведемо перелік основних системних каталогів досліджуваної операційної системи та їх призначення. З самого початку зазначимо, що %systemroot% –системна змінна, що позначає каталог Windows у корені системного розділу (те саме що і %windir%, не плутати з %systemdrive%, яка позначає корінь системного розділу). Поза всіма сумнівами це найважливіша папка, розміщена на активному розділі жорсткого диску. У ній зберігаються всі виконувані файли операційної системи, драйвери, модулі та ін. Варто зазначити, що в деяких випадках дана папка може мати іншу назву. Це трапляється в тому випадку, якщо користувач її замінив в процесі встановлення операційної системи. Тому, якщо її назва наперед невідома, в шляхах можна використовують саме %systemroot%, або %windir%.

Оскільки нас цікавлять папки порівняно великого розміру та папки, які впливають на вивільнення простору системного розділу, то лише на них закцентуємо свою увагу.

%Systemroot%\INF\ – включає в себе всі встановлені на комп’ютері INF-файли, що стосуються наперед визначених стандартних пристроїв –як реальних, так і віртуальних. Дана папка прихована.

%Systemroot%\Installer\ – зберігає більшість з пакетів установників Windows, які коли-небудь інсталювали на комп’ютер. Якщо необхідно встановити або перевстановити програмне забезпечення, що інсталюється за допомогою MSI-пакетів, і при цьому інсталяційний диск відсутній (але раніше таке програмне забезпечення уже встановлювалось), то можна спробувати знайти відповідний інсталяційний файл в цій папці. За замовчуванням вона прихована, а пакети, які в ній містяться, мають числові номери (але не реальні назви), тому найпростішим способом визначити приналежність пакета є використання опцій вкладки «Додатково» діалогу «Властивості пакета». [5]

%Systemroot%\LastGood\(або \LastGood.TMP\) – якщо в системі присутня ця папка, то вона може зберігати резервні копії різних файлів, які пов’язані з останнім вдалим запуском системи.

%Systemroot%\System32\DllCache\ – містить копії всіх системних файлів Windows (не тільки бібліотек, а й програм) і є необхідним при пошкодженні або несанкціонованій системою зміні оригінального системного файлу для його перевстановлення. Даний каталог стиснутий і прихований.

У папці %Systemroot%\System32\drivers\ знаходяться файли драйверів працюючих пристроїв. Проте існує також споріднена папка %Systemroot%\System32\DriverStore\, яка є сховищем драйверів, в тому числі застарілих версій та непрацюючих на даний момент пристроїв.

У папці %Systemroot%\system32\config\ містяться файли, які працюють з реєстром:

файл AppEvent.Evt є журналом подій додатків, що використовується реєстром Windows;
файл SAM містить розділ реєстру HKLM\SAM;
файл SecEvent.Evt є журналом подій безпеки, використовуваного реєстром Windows;
файл SECURITY містить розділ реєстру HKLM\SECURITY;
файл software містить розділ реєстру HKLM\Software;
файл SysEvent.Evt є журналом подій системи, що використовується реєстром Windows;
файл system містить розділ реєстру HKLM\System.
Папка %Systemroot%\system32\DriverStore\ являє собою сховище драйверів пристроїв. Тут містяться драйвери пристроїв, які працюють на даний момент, і драйвери пристроїв, які на даний момент не працюють або тимчасово відсутні у системі і підключаються за необхідності. Особливої уваги заслуговує підкаталог FileRepository, в якому містяться як актуальні драйвери пристроїв, так і попередні (застарілі) їх версії. Файли у цьому каталозі призначені для «відкату», тобто повернення їх у систему у випадку, якщо актуальний драйвер, на відміну від попередньої своєї версії, пристрою працює некоректно [6], [7].

%Systemroot%\SysWOW64\ – аналог папки system32 для 64-розрядних версій операційних систем. Саме до цієї папки звертається в першу чергу операційна система в пошуках штатних утиліт та інтерпретаторів різноманітних скриптів, сценаріїв тощо.

%Systemroot%\WinSxS\ – призначена для збереження резервних копій системних файлів під час здійснення оновлень операційної системи. При чому така папка містить також жорсткі посилання на такі системні файли, які можуть бути розміщення за іншими шляхами у системі і на даний момент навіть можуть використовуватись операційною системою. Підпапка \Backup використовується для тимчасового збереження файлів розпакованих оновлень під час їх установки і в подальшому може бути використана для відміни таких оновлень [8], [9], [10].

У корені системного розділу розміщені папки \Program Files, \Program Files(x86), призначені для збереження файлів 64-та 32-розрядного встановленого програмного забезпечення, відповідно, в тому ж числі і UWP (плиткових) застосунків разом із їх резервними копіями попередніх та видалених версій.

За шляхом %SystemDrive%\System Volume Information\ розміщено приховану системну папку. Вона містить інформацію для бази даних служби індексування вмісту, що прискорює пошук файлів, службу тіньового копіювання розділів для резервного копіювання, та бази даних служби відстеження розподілених посилань, які використовуються для відновлення ярликів і посилань.

У корені системного розділу можуть міститись також системні файли великого розміру, такі як hiberfil.sys – пов’язаний з режимом гібернації та pagefile.sys і swapfile.sys – пов’язані із віртуальною дисковою пам’яттю операційної системи (swap-файли або файли підкачки). Такі файли створюються при увімкнених відповідних режимах роботи: режим гібернації – передбачає збереження даних з оперативної пам’яті у файл для можливості повного вимкнення живлення з подальшим швидким відновленням стану системи при увімкненні живлення; віртуальна дискова пам’ять –дозволяє за рахунок файлів розширити об’єм оперативної пам’яті до необхідного у випадку її нестачі для запуску тих або інших процесів.

І нарешті %SystemDrive%\Users\, яка містить дані користувачів, зареєстрованих (в тому числі і локально) у системі. Це і файли налагодження програмного забезпечення для кожного конкретного користувача: кеші, тимчасові файли працюючих пакетів; і документи користувача: текстові файли у вигляді документів різного формату, зображення, відео, звукові файли, файли завантажені з мережі; і синхронізовані папки хмарних сховищ користувачів, якщо такі використовуються.

Це перелік далеко не усіх системних файлів та папок, які містяться на системному розділі, але вищеописані – це ті з них, які займають порівняно великі об’єми і найбільше вливають на розмір вільного простору на системному розділі.

Визначившись із причинами зменшення вільного простору в системі, локалізувавши на розділі системні файли та папки великого розміру, необхідно підібрати способи і, відповідно, інструменти зменшення їх розміру.

У переважній більшості сама операційна система містить такий інструментарій і надає механізми вирішення проблеми. Проте на даному етапі такі інструменти є ще досить далекі від ідеальних, існують переважно у вигляді консольних утиліт операційної системи, недоступні безпосередньо через графічний користувацький інтерфейс, вимагають використання ключів та параметрів у своїй роботі, а, отже, і додаткових знань. Крім того такі консольні утиліти можуть виконуватись в окремих середовищах, для функціонування яких необхідне використання інтерпретатора командного рядка (cmd), або оболонки з розширеними можливостями PowerShell.


keyword_2
Інтерпретатор командного рядка, як основний інструмент для роботи з консольними утилітами операційної системи.

Незважаючи на простоту використання графічного інтерфейсу користувача Windows (GUI), інтерфейс командного рядка залишається корисним способом виконання багатьох завдань обслуговування, конфігурації та діагностики операційної системи. Багато важливих інструментів доступні тільки з командного рядка. І хоча термін «bat-файл» може видатись пов’язаним із операційною системою MS-DOS, bat-файли та програмні скрипти залишаються потужними інструментами, що надають ефективний спосіб інкапсулювати в собі загальні функції управління. Утиліти командного рядка, bat-файли та скрипти, засновані на WSH (Windows Script Host) разом надають повний набір будівельних блоків, з яких можна створити високорівневі утиліти для виконання складних завдань [11].

Основою для відображення роботи інтерпретатора командного рядка є вікно, яке реалізує командний інтерфейс операційної системи у вигляді так званого запрошення командного рядка (Command Prompt), в якому власне і виконуються консольні застосунки. Тому часто таке вікно називають консоллю інтерпретатора командного рядка операційної системи. Таке вікно призначене як і для введення команд вручну, в інтерактивному режимі, так і для відображення перебігу виконання консольних програм та команд. А при виконанні неконсольних команд викликаються вікна графічного інтерфейсу поточної виконуваної команди або програми.



Розширення імені для запуску файлів.

У багатьох файлів Windows є так зване розширення імені файлу – суфікс, що слідує після крапки у назві файлу і зазвичай складається, як правило, з трьох латинських символів. Це розширення призначене для визначення типу файлу. Деякі з розширень позначають виконувані файли програм різного виду, це такі розширення, як .exe, .bat і .vbs.

Для виконання команди не обов’язково вводити ім’я програми повністю, достатньо ввести ім’я без розширення. У випадку введення команди без розширення, операційна система Windows вважає, що це програма, і додає розширення файлу самостійно, коли здійснюється пошук програми. Якщо така програма знайдена, то операційна система запускає її. Після цієї програми, як правило, перед запуском вводиться список аргументів, вказаний в командному рядку після імені програми, і програма повинна відповідним чином обробляти ці аргументи [10].



Запуск команд із підвищеними привілеями.

Деякі утиліти командного рядка (а іноді програми з графічним інтерфейсом) вимагають для своєї коректної роботи підвищених адміністративних привілеїв (права для користувачів та груп задаються через інструментарій User Account Control). Щоб запустити програму підвищеними привілеями з командного рядка, необхідно запустити її з консолі командного рядка, яка і сама має підвищені права.

У такому режимі необережні дії адміністратора можуть призвести до пошкодження Windows. Це також стосується і запуску з підвищеними привілеями графічних (GUI) програм Windows. Тому варто використовувати це лише для спеціальних завдань, які потребують адміністративних привілеїв, і після завершення виконання цих завдань консоль повинна бути закрита.

